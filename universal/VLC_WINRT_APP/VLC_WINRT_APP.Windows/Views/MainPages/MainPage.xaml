<Page
    x:Class="VLC_WINRT_APP.Views.MainPages.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:VLC_WINRT.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:VLC_WINRT.Views.Controls"
    xmlns:mainPage="using:VLC_WINRT.Views.Controls.MainPage"
    mc:Ignorable="d">
    
    <SwapChainBackgroundPanel x:Name="SwapChainPanel">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid Grid.Row="0"
              Margin="50,40,0,0"
              x:Name="HeaderGrid">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="50" />
                </Grid.RowDefinitions>
                <TextBlock x:Uid="MainPageTitle"
                           Text="VLC for Windows 8"
                           Margin="3,0,0,0"
                           FontWeight="SemiBold"
                           FontSize="20" />

                <StackPanel Grid.Row="1"
                            Orientation="Horizontal">
                    <ListView ItemContainerStyle="{StaticResource ListViewItemContainerStyle}"
                              x:Name="SectionsHeaderListView"
                              SelectionMode="None"
                              IsItemClickEnabled="True"
                              ItemsSource="{Binding Panels}"
                              RenderTransformOrigin="0.5,0.5"
                              ScrollViewer.VerticalScrollMode="Disabled"
                              ScrollViewer.VerticalScrollBarVisibility="Disabled">
                        <ListView.RenderTransform>
                            <CompositeTransform />
                        </ListView.RenderTransform>
                        <ListView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <VirtualizingStackPanel Height="50"
                                                        Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ListView.ItemsPanel>
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Title}"
                                           Opacity="{Binding Opacity}"
                                           TextWrapping="NoWrap"
                                           TextTrimming="None"
                                           Style="{StaticResource SubheaderTextStyle}"
                                           Foreground="WhiteSmoke" />
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                    <ListView ItemContainerStyle="{StaticResource ListViewItemContainerStyle}"
                              Visibility="{Binding Source={StaticResource Locator}, Path=MusicLibraryVM.IsLoaded, Converter={StaticResource BooleanToVisibilityConverter}}"
                              x:Name="SecondarySectionsHeaderListView"
                              SelectionMode="None"
                              IsItemClickEnabled="True"
                              ItemsSource="{Binding SecondaryPanels}"
                              RenderTransformOrigin="0.5,0.5"
                              ScrollViewer.VerticalScrollMode="Disabled"
                              ScrollViewer.VerticalScrollBarVisibility="Disabled">
                        <ListView.RenderTransform>
                            <CompositeTransform />
                        </ListView.RenderTransform>
                        <ListView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <VirtualizingStackPanel Height="50"
                                                        Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ListView.ItemsPanel>
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Title}"
                                           Opacity="{Binding Opacity}"
                                           TextWrapping="NoWrap"
                                           TextTrimming="None"
                                           Style="{StaticResource SubheaderTextStyle}"
                                           Foreground="WhiteSmoke" />
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                    <Button x:Name="MorePanelsButton"
                            Content=""
                            Template="{StaticResource MainButtonStyle}"
                            Visibility="{Binding Source={StaticResource Locator}, Path=MusicLibraryVM.IsLoaded, Converter={StaticResource BooleanToVisibilityConverter}}"
                            FontFamily="Segoe UI Symbol"
                            FontSize="32"
                            Margin="0,0,0,10"
                            HorizontalAlignment="Left"
                            Foreground="{StaticResource MainColor}"/>
                </StackPanel>
            </Grid>
            <StackPanel Grid.Column="1"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right">
                <controls:IndexingMusicLibrary Visibility="{Binding Source={StaticResource Locator}, Path=MusicLibraryVM.IsLoaded, Converter={StaticResource NegatedBooleanToVisibilityConverter}}" />
                <Button Style="{StaticResource OpenFileNoTextAppBarButtonStyle}"
                        Margin="0,0,-30,0" />
                <Button Style="{StaticResource SearchNoTextAppBarButtonStyle}"/>
            </StackPanel>
        </Grid>

        <controls:MiniPlayer Grid.Row="2" />
        <controls:SearchFlyout x:Name="SearchPane" x:FieldModifier="public" />
        <MediaElement x:Name="FoudationMediaElement"
                      x:FieldModifier="public"
                      AudioCategory="BackgroundCapableMedia"
                      AudioDeviceType="Multimedia" />
        <Frame x:Name="MainFrame"
               Grid.Row="1"
               x:FieldModifier="public"
               Navigated="MainFrame_OnNavigated" />
    </SwapChainBackgroundPanel>
</Page>