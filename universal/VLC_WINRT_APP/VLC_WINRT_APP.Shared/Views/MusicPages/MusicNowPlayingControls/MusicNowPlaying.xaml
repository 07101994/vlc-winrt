<UserControl
    x:Class="VLC_WINRT_APP.Views.MusicPages.MusicNowPlayingControls.MusicNowPlaying"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:VLC_WINRT_APP.Views.MusicPages.MusicNowPlayingControls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:extensions="using:WinRTXamlToolkit.Controls.Extensions"
    mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="400"
    DataContext="{Binding Source={StaticResource Locator}, Path=MusicPlayerVM}">

    <Grid Margin="0,0,0,12">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition MaxHeight="400"/>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="12" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Image Grid.Row="0"
               Grid.Column="0"
               Grid.ColumnSpan="3"
               Source="{Binding CurrentAlbum.Picture}"
               Stretch="Uniform"
               Margin="0,12"
               extensions:ImageExtensions.FadeInOnLoaded="True" />
        <Button Grid.Row="1"
                Grid.Column="2"
                Style="{StaticResource TextBlockButtonStyle}"
                HorizontalAlignment="Center"
                Command="{Binding ShareNowPlayingMusicCommand}">
            <Button.Content>
                <Grid>
                    <Path Data="{StaticResource SharePath}"
                          Fill="{ThemeResource BasicForeground}"
                          Width="32"
                          Height="32"
                          Stretch="Uniform" />
                </Grid>
            </Button.Content>
        </Button>
        <TextBlock Grid.Row="1"
                   Grid.Column="1"
                   HorizontalAlignment="Center"
                   TextWrapping="NoWrap"
                   TextTrimming="CharacterEllipsis"
                   TextAlignment="Center">
                        <Run Text="{Binding CurrentTrack.Name}"
                             FontSize="24" />
                        <LineBreak />
                        <Run Text="{Binding CurrentArtist.Name}"
                             FontSize="19"
                             Foreground="{ThemeResource ApplicationBackgroundQuarterTranslucentThemeBrush}" />
        </TextBlock>
        <TextBlock Grid.Row="3"
                   Grid.Column="0"
                   Text="{Binding Time, Converter={StaticResource MillisecondsStringConverter}}"
                   HorizontalAlignment="Left"
                   VerticalAlignment="Center"
                   FontWeight="Light"
                   FontSize="18"/>
        <Slider Grid.Row="3"
                Grid.Column="1"
                Margin="6,6,6,-5"
                VerticalAlignment="Center"
                Value="{Binding Position, Mode=TwoWay, Converter={StaticResource PositionToFixedPointConverter}}"
                Style="{StaticResource VLCSlider}"
                ThumbToolTipValueConverter="{StaticResource MillisecondsStringConverter}" />
        <TextBlock Grid.Row="3"
                   Grid.Column="2"
                   Text="{Binding TimeTotal.TotalSeconds, Converter={StaticResource SecondsStringConverter}}"
                   HorizontalAlignment="Right"
                   VerticalAlignment="Center"
                   FontWeight="Light"
                   FontSize="18" />
        <AppBarToggleButton Grid.Row="4"
                            Grid.Column="0"
                            Icon="Shuffle"
                            IsCompact="True"
                            IsChecked="{Binding TrackCollection.IsShuffled}"
                            VerticalAlignment="Center"
                            Command="{Binding Shuffle}" />
        <Grid Grid.Row="4"
              Grid.Column="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <AppBarButton Grid.Column="0"
                          HorizontalAlignment="Center"
                          IsCompact="True"
                          Style="{StaticResource AppBarButtonStyleHuge}"
                          Height="50"
                          Width="50"
                          VerticalAlignment="Center"
                          Command="{Binding PlayPreviousCommand}"
                          IsEnabled="{Binding TrackCollection.CanGoPrevious}">
                <AppBarButton.Icon>
                    <FontIcon Glyph="&#xE100;"
                              FontSize="30" />
                </AppBarButton.Icon>
            </AppBarButton>
            <AppBarButton Grid.Column="1"
                          IsCompact="True"
                          Visibility="{Binding IsPlaying, Converter={StaticResource NegatedBooleanToVisibilityConverter}}"
                          Height="80"
                          Width="80"
                          Style="{StaticResource AppBarButtonStyleHuge}"
                          VerticalAlignment="Center"
                          Command="{Binding PlayOrPauseCommand}"
                          Holding="PlayPauseHold">
                <AppBarButton.Icon>
                    <FontIcon Glyph="&#xE102;"
                              FontSize="42" />
                </AppBarButton.Icon>
            </AppBarButton>
            <AppBarButton Grid.Column="1"
                          IsCompact="True"
                          Visibility="{Binding IsPlaying, Converter={StaticResource BooleanToVisibilityConverter}}"
                          Height="80"
                          Width="80"
                          Style="{StaticResource AppBarButtonStyleHuge}"
                          VerticalAlignment="Center"
                          Command="{Binding PlayOrPauseCommand}"
                          Holding="PlayPauseHold">
                <AppBarButton.Icon>
                    <FontIcon Glyph="&#xE103;"
                              FontSize="42" />
                </AppBarButton.Icon>
            </AppBarButton>
            <AppBarButton Grid.Column="2"
                          IsCompact="True"
                          Style="{StaticResource AppBarButtonStyleHuge}"
                          Height="50"
                          Width="50"
                          VerticalAlignment="Center"
                          HorizontalAlignment="Center"
                          Command="{Binding PlayNextCommand}"
                          IsEnabled="{Binding TrackCollection.CanGoNext}">
                <AppBarButton.Icon>
                    <FontIcon Glyph="&#xE101;"
                              FontSize="30" />
                </AppBarButton.Icon>
            </AppBarButton>
        </Grid>
        <AppBarToggleButton Grid.Row="4"
                            Grid.Column="2"
                            Icon="Favorite"
                            IsCompact="True"
                            VerticalAlignment="Center"
                            IsChecked="{Binding CurrentAlbum.Favorite}"
                            Command="{Binding CurrentAlbum.FavoriteAlbum}"
                            CommandParameter="{Binding CurrentAlbum}" />
    </Grid>
</UserControl>
