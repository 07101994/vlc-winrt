<UserControl
    x:Class="VLC_WINRT.Views.Controls.MainPage.MusicColumn"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:VLC_WINRT.Views.Controls.MainPage"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="using:VLC_WINRT.Utility.Converters"
    xmlns:wrapPanelControl="using:VLC_WINRT.Views.Controls.WrapPanelControl"
    mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="400">

    <UserControl.Resources>
        <CollectionViewSource x:Name="albumsCollection" Source="{Binding Artist}" ItemsPath="Albums" IsSourceGrouped="True" />
        <converters:StringToUpperConverter x:Key="StringToUpperConverter"/>
    </UserControl.Resources>
    <Grid >
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <ListView x:Name="SectionsHeaderListView" Margin="0,10,0,0" ItemContainerStyle="{StaticResource ListViewItemContainerStyle}" SelectionMode="None" IsItemClickEnabled="True" ItemClick="SectionsHeaderListView_OnItemClick" ItemsSource="{Binding Panels}">
            <ListView.ItemsPanel>
                <ItemsPanelTemplate>
                    <wrapPanelControl:WrapPanel Margin="50,0,0,0" Orientation="Horizontal" >
                        <wrapPanelControl:WrapPanel.ChildrenTransitions>
                            <TransitionCollection>
                                <EntranceThemeTransition FromHorizontalOffset="100"/>
                                <AddDeleteThemeTransition />
                            </TransitionCollection>
                        </wrapPanelControl:WrapPanel.ChildrenTransitions>
                    </wrapPanelControl:WrapPanel>
                </ItemsPanelTemplate>
            </ListView.ItemsPanel>
            <ListView.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Title}" Opacity="{Binding Opacity}" TextWrapping="NoWrap" TextTrimming="None" Style="{StaticResource ColumnHeaderTextStyle}"/>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <Grid Grid.Row="1" x:Name="SectionsGrid" Margin="50,0,0,0">
            <Grid x:Name="ArtistPanel" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="320" />
                    <ColumnDefinition Width="1"/>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="1"/>
                    <ColumnDefinition Width="320"/>
                </Grid.ColumnDefinitions>
                <ListView Grid.Column="0" ItemContainerStyle="{StaticResource ListViewItemContainerStyle}" Margin="-15,0,0,0" Header="{Binding Artist.Count}" ItemsSource="{Binding Artist}" SelectionMode="Single" SelectionChanged="OnSelectedArtist_Changed">
                    <ListView.HeaderTemplate>
                        <DataTemplate>
                            <TextBlock Margin="20,5,0,10"
                                Style="{StaticResource ColumnHeaderTextStyle}" FontSize="17">
                                <Run Text="{Binding}"/>
                                <Run Text="artists"/>
                            </TextBlock>
                        </DataTemplate>
                    </ListView.HeaderTemplate>
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="16,0,0,0" >
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="50"/>
                                    <ColumnDefinition Width="10"/>
                                    <ColumnDefinition Width="270"/>
                                </Grid.ColumnDefinitions>
                                <Image Source="{Binding Picture}" Height="50" Stretch="UniformToFill"/>
                                <StackPanel Grid.Column="2" VerticalAlignment="Center">
                                    <TextBlock Text="{Binding Name, Converter={StaticResource StringToUpperConverter}}" TextWrapping="NoWrap" TextTrimming="WordEllipsis" FontSize="18"/>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
                <Border Width="1" Grid.Column="1" Background="#663E3E3E" />
                <ListView x:Name="AlbumsByArtistListView" Grid.Column="2" ItemsSource="{Binding Source={StaticResource albumsCollection}}" SelectedIndex="0" SelectionMode="None" IsItemClickEnabled="True" ItemClick="AlbumGridView_ItemClick">
                    <ListView.GroupStyle>
                        <GroupStyle>
                            <GroupStyle.Panel>
                                <ItemsPanelTemplate>
                                    <wrapPanelControl:WrapPanel Margin="10,0,0,0" Orientation="Horizontal">
                                        <wrapPanelControl:WrapPanel.ChildrenTransitions>
                                            <TransitionCollection>
                                                <AddDeleteThemeTransition/>
                                                <RepositionThemeTransition />
                                                <EntranceThemeTransition FromHorizontalOffset="250"/>
                                            </TransitionCollection>
                                        </wrapPanelControl:WrapPanel.ChildrenTransitions>
                                    </wrapPanelControl:WrapPanel>
                                </ItemsPanelTemplate>
                            </GroupStyle.Panel>
                            <GroupStyle.HeaderTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Name, Converter={StaticResource StringToUpperConverter}}" TextWrapping="NoWrap" TextTrimming="WordEllipsis" Margin="10" FontSize="23" />
                                </DataTemplate>
                            </GroupStyle.HeaderTemplate>
                        </GroupStyle>
                    </ListView.GroupStyle>
                    <ListView.ItemContainerStyle>
                        <Style TargetType="ListViewItem">
                            <Setter Property="Padding" Value="-5"/>
                            <Setter Property="Margin" Value="0"/>
                        </Style>
                    </ListView.ItemContainerStyle>
                    <ListView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel />
                        </ItemsPanelTemplate>
                    </ListView.ItemsPanel>
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Grid Height="150" Width="150">
                                <Image Source="{Binding Picture}" Stretch="UniformToFill"/>
                                <Grid Height="80" VerticalAlignment="Bottom">
                                    <Grid.Background>
                                        <LinearGradientBrush StartPoint="1,0">
                                            <GradientStopCollection>
                                                <GradientStop Color="#990A0A0A" Offset="1"/>
                                                <GradientStop Color="#00020202" />
                                            </GradientStopCollection>
                                        </LinearGradientBrush>
                                    </Grid.Background>
                                    <StackPanel VerticalAlignment="Bottom" HorizontalAlignment="Left" Margin="5">
                                        <TextBlock Text="{Binding Name}" TextWrapping="NoWrap" TextTrimming="WordEllipsis" FontSize="18" FontWeight="Light" />
                                        <!--<TextBlock Text="{Binding Year}" FontSize="14" Foreground="#7FF5F5F5"/>-->
                                    </StackPanel>
                                </Grid>
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>

                <Border Width="1" Grid.Column="3" Background="#663E3E3E"/>
                <ListView Grid.Column="4" ItemContainerStyle="{StaticResource ListViewItemContainerStyle}" x:Name="AlbumPlaylistListView" >
                    <ListView.HeaderTemplate>
                        <DataTemplate>
                            <StackPanel>
                            <TextBlock Margin="20,5,0,10"
                                Style="{StaticResource ColumnHeaderTextStyle}" FontSize="17">
                                <Run Text="{Binding Tracks.Count}"/>
                                <Run Text="tracks"/>
                                </TextBlock>
                                <StackPanel Orientation="Horizontal">
                                    <Button Content="Play album" Command="{Binding PlayAlbum}" CommandParameter="{Binding}"/>
                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </ListView.HeaderTemplate>
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Button Template="{StaticResource MainButtonStyle}"
                                Command="{Binding PlayTrack}"
                                CommandParameter="{Binding}">
                                <StackPanel Orientation="Horizontal" Width="300">
                                    <TextBlock Text="{Binding Index}" FontSize="22" FontWeight="SemiBold" />
                                    <TextBlock Text="{Binding Name}" VerticalAlignment="Bottom" Margin="5,0,0,2"/>
                                </StackPanel>
                            </Button>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </Grid>
            <Grid x:Name="TracksPanel">
                <ListView ItemsSource="{Binding Track}">
                    <ListView.HeaderTemplate>
                        <DataTemplate>
                            <Grid Margin="5,0,0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="250"/>
                                    <ColumnDefinition Width="15"/>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="15"/>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="15"/>
                                    <ColumnDefinition Width="15"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="track" Style="{StaticResource TitleTextStyle}"/>
                                <TextBlock Grid.Column="2" Text="artist" Style="{StaticResource TitleTextStyle}"/>
                                <TextBlock Grid.Column="4" Text="album" Style="{StaticResource TitleTextStyle}"/>
                            </Grid>
                        </DataTemplate>
                    </ListView.HeaderTemplate>
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Button Template="{StaticResource MainButtonStyle}"
                                Command="{Binding PlayTrack}"
                                CommandParameter="{Binding}" Padding="4">
                                <Grid  VerticalAlignment="Center">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="250"/>
                                        <ColumnDefinition Width="15"/>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="15"/>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="15"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="{Binding Name}" Style="{StaticResource BodyTextStyle}" />
                                    <TextBlock Grid.Column="2" Text="{Binding ArtistName}" Style="{StaticResource BodyTextStyle}"/>
                                    <TextBlock Grid.Column="4" Text="album" Style="{StaticResource BodyTextStyle}"/>
                                    <TextBlock Grid.Column="6" Text="" FontSize="22" FontFamily="Segoe UI Symbol" Visibility="{Binding IsFavorite, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                </Grid>
                            </Button>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </Grid>
        </Grid>
    </Grid>
</UserControl>
